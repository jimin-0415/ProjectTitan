/**********************************************************************************************************************
* @file  CoreMacro.h
*
* @brief 매크로 h 파일
*
* @date  2025.02.16
**********************************************************************************************************************/


#pragma once


/**********************************************************************************************************************
* @brief 강제 크래시 매크로
**********************************************************************************************************************/
#define CRASH( cause )                                                                                                \
{                                                                                                                     \
	ExUInt32* crash = nullptr;                                                                                        \
	__analysis_assume( crash != nullptr );                                                                            \
    *crash = 0xDEADBEEF;                                                                                              \
}

/**********************************************************************************************************************
* @brief 강제 크래시 매크로
**********************************************************************************************************************/
#define ASSERT_CRASH( expr )                                                                                          \
{                                                                                                                     \
	if (!(expr))                                                                                                      \
	{                                                                                                                 \
		CRASH("ASSERT_CRASH!!!");                                                                                     \
		__analysis_assume(expr);                                                                                      \
	}                                                                                                                 \
}

/**********************************************************************************************************************
* @brief 참조 파라매터 명시 매크로
**********************************************************************************************************************/
#define OUT

/**********************************************************************************************************************
* @brief Lock 매크로
**********************************************************************************************************************/
#define USE_LOCK        RWSpinLock _lock;
#define READ_LOCK       ReadLockGuard readLockGuard( _lock );
#define WRITE_LOCK      WriteLockGuard writeLockGuard( _lock );

#define CRASH( cause )                                                                                                \
{                                                                                                                     \
	ExUInt32* crash = nullptr;                                                                                        \
	__analysis_assume( crash != nullptr );                                                                            \
    *crash = 0xDEADBEEF;                                                                                              \
}